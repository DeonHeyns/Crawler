from httplib2 import Http
from urllib import urlencode
import os

homeAges = ["New",
            "1-3 Years",
            "4-6 Years",
            "7-15 Years",
            "16-25 Years",
            "26-40 Years",
            "41-70 Years"]

coverageAmounts = [
    150000,
    200000,
    250000,
    300000,
    400000,
    500000,
    750000
]

coverageTypes = [
    "HOMEOWNERS",
    # "CONDOMINIUM",
    #    "MOBILEHOME",
    #    "RENTERS",
    #    "EARTHQUAKE - Single Family",
    #    "EARTHQUAKE - Condominium",
    #    "EARTHQUAKE - Mobilehome",
    #    "EARTHQUAKE - Renters"
]

locations = [
    "ALAMEDA ALAMEDA",
    "ALAMEDA BERKELEY",
    "ALAMEDA FREMONT",
    "ALAMEDA HAYWARD",
    "ALAMEDA LIVERMORE",
    "ALAMEDA OAKLAND - Piedmont",
    "ALAMEDA OAKLAND - San Leandro",
    "ALAMEDA UNION CITY",
    "ALPINE MERKLEEVILLE",
    "AMADOR PIONEER",
    "BUTTE CHICO - Chapman Town",
    "BUTTE CHICO - Enloe Memorial Park",
    "CALAVERAS VALLEY SPRING",
    "COLUSA COLUSA",
    "CONTRA COSTA ANTIOCH",
    "CONTRA COSTA CONCORD",
    "CONTRA COSTA RICHMOND",
    "CONTRA COSTA WALNUT CREEK",
    "DEL NORTE CRESCENT CITY",
    "EL DORADO PLACERVILLE",
    "EL DORADO SO LAKE TAHOE",
    "FRESNO CLOVIS",
    "FRESNO FRESNO - Biola Junction",
    "FRESNO FRESNO - Sunnyside",
    "FRESNO Reedley",
    "GLENN ORLAND",
    "HUMBOLDT EUREKA - Carson Park",
    "HUMBOLDT EUREKA - Pine Hill",
    "HUMBOLDT MCKINLEYVILLE",
    "IMPERIAL CALEXICO",
    "IMPERIAL EL CENTRO",
    "INYO BISHOP",
    "KERN BAKERSFIELD - Kern City",
    "KERN BAKERSFIELD - Panama",
    "KERN DELANO",
    "KERN RIDGECREST",
    "KERN WASCO",
    "KINGS HANFORD",
    "LAKE LAKEPORT",
    "LASSEN SUSANVILLE",
    "LOS ANGELES ALHAMBRA",
    "LOS ANGELES ALTADENA",
    "LOS ANGELES AZUSA",
    "LOS ANGELES BALDWIN PARK",
    "LOS ANGELES BELL",
    "LOS ANGELES BELLFLOWER",
    "LOS ANGELES BURBANK",
    "LOS ANGELES CANOGA PARK",
    "LOS ANGELES CANYON COUNTRY",
    "LOS ANGELES CARSON",
    "LOS ANGELES CERRITOS",
    "LOS ANGELES CHATSWORTH",
    "LOS ANGELES COMPTON",
    "LOS ANGELES CULVER CITY",
    "LOS ANGELES EL SEGUNDO",
    "LOS ANGELES GARDENA",
    "LOS ANGELES GLENDALE",
    "LOS ANGELES GLENDORA",
    "LOS ANGELES HAWTHORNE",
    "LOS ANGELES HOLLYWOOD-WEST",
    "LOS ANGELES HUNTINGTON PARK",
    "LOS ANGELES INGLEWOOD",
    "LOS ANGELES LA PUENTE",
    "LOS ANGELES LA-CENTRAL",
    "LOS ANGELES LA-EAST",
    "LOS ANGELES LA-ECHO PARK-SILVER LAKE",
    "LOS ANGELES LA-EL SERENO",
    "LOS ANGELES LA-GRIFFITH",
    "LOS ANGELES LA-HIGHLAND PARK",
    "LOS ANGELES LA-MAR VISTA-CULVER CITY",
    "LOS ANGELES LA-MID CITY",
    "LOS ANGELES LA-SO. CENTRAL",
    "LOS ANGELES LA-VERMONT",
    "LOS ANGELES LA-WAGNER",
    "LOS ANGELES LA-WEST",
    "LOS ANGELES LA-WESTCHESTER",
    "LOS ANGELES LA-WILSHIRE-LA BREA",
    "LOS ANGELES LAKEWOOD",
    "LOS ANGELES LANCASTER",
    "LOS ANGELES LONG BEACH",
    "LOS ANGELES LONG BEACH - COLLEGE",
    "LOS ANGELES MONROVIA",
    "LOS ANGELES MONTEBELLO",
    "LOS ANGELES MONTEREY PARK",
    "LOS ANGELES NORTHRIDGE - 91325",
    "LOS ANGELES NORTHRIDGE - 91326",
    "LOS ANGELES NORWALK",
    "LOS ANGELES PACIFIC PALISADES",
    "LOS ANGELES PACOIMA",
    "LOS ANGELES PALMDALE",
    "LOS ANGELES PALOS VERDES",
    "LOS ANGELES PANORAMA CITY",
    "LOS ANGELES PASADENA",
    "LOS ANGELES PICO RIVERA",
    "LOS ANGELES POMONA",
    "LOS ANGELES RANCHO PALOS VERDE",
    "LOS ANGELES REDONDO BEACH",
    "LOS ANGELES RESEDA",
    "LOS ANGELES ROSEMEAD",
    "LOS ANGELES SAN PEDRO",
    "LOS ANGELES SANTA CLARITA",
    "LOS ANGELES SANTA MONICA",
    "LOS ANGELES SOUTH GATE",
    "LOS ANGELES SYLMAR",
    "LOS ANGELES TEMPLE CITY",
    "LOS ANGELES TORRANCE",
    "LOS ANGELES VAN NUYS",
    "LOS ANGELES WEST COVINA",
    "LOS ANGELES WOODLAND HILLS",
    "MADERA MADERA - East Madera",
    "MADERA MADERA - West Madera",
    "MARIN MILL VALLEY",
    "MARIN SAN RAFAEL",
    "MARIPOSA MARIPOSA",
    "MENDOCINO UKIAH",
    "MENDOCINO WILLITS",
    "MERCED MERCED",
    "MODOC ALTURAS",
    "MONO MAMMOTH LAKES",
    "MONTEREY MONTEREY",
    "MONTEREY SALINAS",
    "MONTEREY SEASIDE",
    "NAPA NAPA",
    "NEVADA GRASS VALLEY",
    "ORANGE ANAHEIM - Brookhurst Center",
    "ORANGE ANAHEIM - Federal",
    "ORANGE BUENA PARK",
    "ORANGE COSTA MESA",
    "ORANGE FOUNTAIN VALLEY",
    "ORANGE FULLERTON",
    "ORANGE GARDEN GROVE",
    "ORANGE HUNTINGTON BH",
    "ORANGE IRVINE",
    "ORANGE LA HABRA",
    "ORANGE LAGUNA BEACH",
    "ORANGE LAGUNA NIGUEL",
    "ORANGE LAKE FOREST",
    "ORANGE MISSION VIEJO",
    "ORANGE NEWPORT BEACH",
    "ORANGE ORANGE",
    "ORANGE PLACENTIA",
    "ORANGE SAN CLEMENTE",
    "ORANGE SANTA ANA - Centennial Park",
    "ORANGE SANTA ANA - Logan Park",
    "ORANGE STANTON",
    "ORANGE TUSTIN",
    "ORANGE WESTMINSTER",
    "ORANGE YORBA LINDA",
    "PLACER LINCOLN",
    "PLACER ROSEVILLE - Downtown",
    "PLACER ROSEVILLE - Maidu Park",
    "PLUMAS QUINCY",
    "RIVERSIDE BANNING",
    "RIVERSIDE CATHEDRAL CITY",
    "RIVERSIDE CORONA - 92879",
    "RIVERSIDE CORONA - 92882",
    "RIVERSIDE DESERT HOT SPRINGS",
    "RIVERSIDE HEMET",
    "RIVERSIDE INDIO",
    "RIVERSIDE LAKE ELSINORE",
    "RIVERSIDE MORENO VALLEY",
    "RIVERSIDE MURRIETA",
    "RIVERSIDE PERRIS",
    "RIVERSIDE RIVERSIDE - 92503",
    "RIVERSIDE RIVERSIDE - 92506",
    "RIVERSIDE TEMECULA",
    "SACRAMENTO CARMICHAEL",
    "SACRAMENTO FAIR OAKS",
    "SACRAMENTO FOLSOM",
    "SACRAMENTO FRUITRIDGE",
    "SACRAMENTO GREENHAVEN",
    "SACRAMENTO SACRAMENTO - Rosemont",
    "SACRAMENTO SACRAMENTO - Southgate",
    "SAN BENITO HOLLISTER",
    "SAN BERNARDINO ADELANTO",
    "SAN BERNARDINO BARSTOW",
    "SAN BERNARDINO BIG BEAR LAKE",
    "SAN BERNARDINO CHINO",
    "SAN BERNARDINO CHINO HILLS",
    "SAN BERNARDINO COLTON",
    "SAN BERNARDINO FONTANA",
    "SAN BERNARDINO HESPERIA",
    "SAN BERNARDINO ONTARIO",
    "SAN BERNARDINO RANCHO CUCAMONGA",
    "SAN BERNARDINO REDLAND",
    "SAN BERNARDINO RUNNING SPRINGS",
    "SAN BERNARDINO SAN BERNARDINO",
    "SAN BERNARDINO TWENTYNINE PALMS",
    "SAN BERNARDINO UPLAND",
    "SAN BERNARDINO VICTORVILLE",
    "SAN BERNARDINO YUCAIPA",
    "SAN DIEGO CARLSBAD",
    "SAN DIEGO CHULA VISTA",
    "SAN DIEGO DEL MAR",
    "SAN DIEGO EL CAJON",
    "SAN DIEGO ENCINITAS",
    "SAN DIEGO ESCONDIDO",
    "SAN DIEGO FALLBROOK",
    "SAN DIEGO LA MESA",
    "SAN DIEGO LAKESIDE",
    "SAN DIEGO MIRA MESA",
    "SAN DIEGO NATIONAL CITY",
    "SAN DIEGO OCEAN BEACH",
    "SAN DIEGO OCEANSIDE",
    "SAN DIEGO PACIFIC BEACH",
    "SAN DIEGO POWAY",
    "SAN DIEGO RAMONA",
    "SAN DIEGO RANCHO BERNARDO",
    "SAN DIEGO SAN DIEGO - 92105",
    "SAN DIEGO SAN DIEGO - 92154",
    "SAN DIEGO SAN MARCOS",
    "SAN DIEGO SPRING VALLEY",
    "SAN FRANCISCO SAN FRANCISCO - Glen Park",
    "SAN FRANCISCO SAN FRANCISCO - Mission",
    "SAN FRANCISCO SAN FRANCISCO - Nob Hill",
    "SAN FRANCISCO SAN FRANCISCO-Sunset District",
    "SAN JOAQUIN STOCKTON - 95206",
    "SAN JOAQUIN STOCKTON - 95207",
    "SAN JOAQUIN TRACY",
    "SAN L OBISPO SAN L OBISPO",
    "SAN LUIS OBISPO PASO ROBLES",
    "SAN MATEO DALY CITY",
    "SAN MATEO PACIFICA",
    "SAN MATEO REDWOOD CITY",
    "SAN MATEO SAN MATEO",
    "SANTA BARBARA LOMPOC",
    "SANTA BARBARA SANTA BARBARA - Downtown",
    "SANTA BARBARA SANTA BARBARA - El Sueno",
    "SANTA BARBARA SANTA MARIA",
    "SANTA CLARA CAMPBELL",
    "SANTA CLARA CUPERTINO",
    "SANTA CLARA EAST PALO ALTO",
    "SANTA CLARA SAN JOSE - 95111",
    "SANTA CLARA SAN JOSE - 95127",
    "SANTA CLARA SAN JOSE - Alamitos",
    "SANTA CLARA SAN JOSE - Campbell",
    "SANTA CLARA SANTA CLARA",
    "SANTA CLARA SUNNYVALE",
    "SANTA CRUZ SANTA CRUZ",
    "SANTA CRUZ WATSONVILLE",
    "SHASTA REDDING - Enterprise",
    "SHASTA REDDING - Silverthorn",
    "SIERRA LOYALTON",
    "SISKIYOU YREKA",
    "SOLANO FAIRFIELD",
    "SOLANO SUISUN CITY",
    "SOLANO VACAVILLE",
    "SOLANO VALLEJO - Castlewood Park",
    "SOLANO VALLEJO - Downtown",
    "SONOMA PETALUMA",
    "SONOMA SANTA ROSA - City Park",
    "SONOMA SANTA ROSA-Montgomery Village",
    "STANISLAUS MODESTO - Dry Creek",
    "STANISLAUS MODESTO - Whitmore Park",
    "STANISLAUS TURLOCK",
    "SUTTER YUBA CITY",
    "TEHAMA RED BLUFF",
    "TRINITY LEWISTON",
    "TULARE PORTERVILLE",
    "TULARE VISALIA",
    "TUOLUMNE JAMESTOWN",
    "TUOLUMNE SONORA",
    "VENTURA CAMARILLO",
    "VENTURA OXNARD - Northwest",
    "VENTURA OXNARD - South",
    "VENTURA SIMI VALLEY",
    "VENTURA THOUSAND OAKS",
    "YOLO DAVIS",
    "YOLO WOODLAND",
    "YUBA MARYSVILLE"
]

base_url = "https://interactive.web.insurance.ca.gov/survey/survey?type=homeownerSurvey&event=HOMEOWNERS"
headers = {"Content-type": "application/x-www-form-urlencoded", "Accept": "text/plain"}

h = Http()

if not os.path.exists("California/"):
    os.makedirs("California/")
for location in locations:
    if not os.path.exists("California/{}/".format(location)):
        os.makedirs("California/{}/".format(location))
    for coverageType in coverageTypes:
        for coverageAmount in coverageAmounts:
            for age in homeAges:
                data = dict(location=location, coverageType=coverageType, coverageAmount=coverageAmount, homeAge=age)
                print("Fetching {} {} {} {}".format(location, coverageType, age, coverageAmount))
                resp, content = h.request(base_url, "POST", urlencode(data),
                                          headers={'Content-Type': 'application/x-www-form-urlencoded'})
 
                print("Writing contents to disk".format(location, coverageType, age, coverageAmount))
                with open(
                        "California/{}/{}_{}_{}_{}.html".format(location, location, coverageType, age, coverageAmount),
                        "w") as text_file:
                    text_file.write(content)